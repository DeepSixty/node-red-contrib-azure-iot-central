[{"id":"6cc00f6c.58673","type":"function","z":"cc61b493.f53e68","name":"turnOn, turnOff","func":"var ledOn = flow.get('ledOn');\nif(ledOn === null || undefined) \n{\n    node.log(\"LED initialized.to off.\");\n    ledOn = false;\n    flow.set('ledOn', ledOn);\n}\n\n// Handle LED turn on command\nfunction turnOn(request, response) {\n  node.log('Received asynchronous call to turn on LED');\n  if(!ledOn){\n    node.log('Turning on the LED');\n    ledOn = true;\n    flow.set('ledOn', ledOn);\n  }\n  response.send(200, (err) => {\n    if (err) {\n      node.error('Unable to send method response: ' + err.toString());\n    }\n  });\n}\n\n// Handle LED turn off command\nfunction turnOff(request, response) {\n  node.log('Received asynchronous call to turn off LED');\n  if(ledOn){\n    node.log('Turning off the LED');\n    ledOn = false;\n    flow.set('ledOn', ledOn);\n  }\n  response.send(200, (err) => {\n    if (err) {\n      node.error('Unable to send method response: ' + err.toString());\n    }\n  });\n}\n\nflow.set('turnOn',turnOn);\nflow.set('turnOff',turnOff);\n\nnode.log(\"turnOn, turnOff initialized.\");","outputs":1,"noerr":0,"x":400,"y":260,"wires":[[]]}]